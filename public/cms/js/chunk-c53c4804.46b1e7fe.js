(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c53c4804"],{"0ee0":function(t,e,a){},"3a29":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addcoupon"},[a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("NavTo")],1),a("el-container",[a("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[a("Header")],1),a("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[a("el-main",[a("div",{staticClass:"add"},[a("div",{staticClass:"add_btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.jumpback}},[t._v("返回")])],1),a("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"优惠券名称"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{"hide-required-asterisk":""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"发放总量"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.form.stock,callback:function(e){t.$set(t.form,"stock",e)},expression:"form.stock"}}),a("div",{staticClass:"dan"},[t._v("张")])],1),a("div",{staticClass:"ts"},[t._v("修改优惠券总量时只能增加不能减少，请谨慎设置")]),a("el-form-item",{attrs:{label:"适用商品"}},[a("el-radio-group",{staticStyle:{"padding-top":"14px"},on:{change:t.get_value},model:{value:t.form.goods_ids,callback:function(e){t.$set(t.form,"goods_ids",e)},expression:"form.goods_ids"}},[a("el-radio",{attrs:{label:0}},[t._v("全部商品可用")]),a("el-radio",{attrs:{label:1}},[t._v("指定商品可用")])],1)],1),1==t.form.goods_ids?a("div",{staticClass:"xzsp",on:{click:function(e){t.dialogVisibleadd=!0}}},[t._v("选择商品")]):t._e(),1==t.form.goods_ids?a("div",{staticClass:"spxz"},[a("el-collapse",{on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"已选择商品",name:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.xuanzhong,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"",label:"所有商品",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"shiyong"},[a("div",{staticClass:"sy_01"},[a("img",{attrs:{src:t.$getimg+t.tableData[e.$index].imgs}})]),a("div",{staticClass:"sy_02"},[a("div",{staticClass:"sy_02_1"},[t._v(t._s(t.tableData[e.$index].goods_name)+"--"+t._s(e.$index))]),a("div",{staticClass:"sy_02_2"},[t._v("¥"+t._s(t.tableData[e.$index].price)+" 库存："+t._s(t.tableData[e.$index].stock))])])])]}}],null,!1,2081200930)}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(a){return t.del(e.$index)}},slot:"reference"},[t._v("移除")])]}}],null,!1,3755682493)})],1)],1)],1)],1):t._e(),a("el-form-item",{attrs:{label:"使用门槛",prop:"resource"}},[a("el-radio-group",{model:{value:t.form.full,callback:function(e){t.$set(t.form,"full",e)},expression:"form.full"}},[a("el-radio",{attrs:{label:"0"}},[t._v("无门槛")]),a("el-radio",{attrs:{label:"2"}},[t._v("订单满 "),a("el-input",{staticStyle:{width:"100px"},model:{value:t.form.man,callback:function(e){t.$set(t.form,"man",e)},expression:"form.man"}}),t._v(" 元\n\t\t\t\t\t\t\t\t\t")],1)],1)],1),a("el-form-item",{attrs:{label:"优惠价格"}},[a("div",{staticClass:"jian"},[t._v("减免")]),a("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reduce,callback:function(e){t.$set(t.form,"reduce",e)},expression:"form.reduce"}}),a("div",{staticClass:"dan"},[t._v("元")])],1),a("el-form-item",{attrs:{label:"用券时间"}},[a("el-radio-group",{staticStyle:{"text-align":"left"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}},[a("el-radio",{attrs:{label:""}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t - \n\t\t\t\t\t\t\t\t\t\t"),a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1),a("br"),a("div",{staticStyle:{height:"23px"}}),a("el-radio",{attrs:{label:"1"}},[t._v("领券当日起 "),a("el-input",{staticStyle:{width:"100px"},model:{value:t.form.day,callback:function(e){t.$set(t.form,"day",e)},expression:"form.day"}}),t._v(" 天内可用")],1)],1)],1),a("el-form-item",{attrs:{label:"使用次数",prop:"resource"}},[a("el-radio-group",{staticStyle:{"margin-top":"15px"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:"1"}},[t._v("有限")]),a("el-radio",{attrs:{label:"2"}},[t._v("无限")])],1)],1)],1),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.jumpback}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)])],1)],1)],1),a("el-dialog",{staticStyle:{width:"60vw",height:"60vh",margin:"10vh 0 0 20vw"},attrs:{title:"","lock-scroll":!0,top:0,"destroy-on-close":!0,visible:t.dialogVisibleadd,width:"100%"},on:{"update:visible":function(e){t.dialogVisibleadd=e}}},[a("span",[a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:t.alls},slot:"reference"},[t._v("全选")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"goods_name",label:"商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"pro"},[a("div",{staticClass:"pro_02"},[a("img",{attrs:{src:t.$getimg+e.row.imgs}})]),a("div",{staticClass:"pro_03"},[a("div",{staticClass:"pro_03_1"},[t._v(t._s(e.row.goods_name))]),a("div",{staticClass:"pro_03_2"},[t._v("¥"+t._s(e.row.price))])])])]}}])}),a("el-table-column",{attrs:{prop:"sales",label:"近30天销量/累计销量",width:"180"}}),a("el-table-column",{attrs:{prop:"stock",label:"库存",width:"80"}}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.canjia(e.$index)}}},[t._v("选择")])]}}])})],1),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisibleadd=!1}}},[t._v("关闭")])],1)],1)],1)},s=[],l=(a("5c96"),a("a49b")),i=a("15fc"),n=a("71c2"),r={data:function(){return{activeNames:["1"],xuanzhong:[],tableRowClassName:"",choose:!0,tableData:[],tab_nav:!1,dialogVisibleadd:!1,dialogFormVisible:!1,oid:0,form:{goods_ids:[],stock:"",name:"",fanwei:"",full:"",reduce:"",start_time:"",end_time:"",time:"",day:"",status:"",stock_type:""},formLabelWidth:"120px",list:[],all:"",size:10,total:"",options:[],value:"",typeList:[],upfile_banner_list:[],upfile_url:l["a"]+"com/up_img?back=id",upfile_head:{token:localStorage.getItem("token")},upfile_list:[]}},components:{Header:n["a"],NavTo:i["a"]},methods:{handleChange:function(t){console.log(t)},get_value:function(t){console.log(t);var e=[];0==t&&e.push(t)},alls:function(){this.xuanzhon=[];var t=[];for(var e in this.tableData)t.push(e);this.xuanzhon=t,console.log(this.xuanzhon),this.dialogVisibleadd=!1},canjia:function(t){this.xuanzhong.indexOf(t)<0&&this.xuanzhong.push(t),console.log(this.xuanzhong)},del:function(t){this.$set(this.xuanzhong,t,0),console.log(t,this.xuanzhong)},get_pro:function(){var t=this;this.http.post_show("product/admin/get_product").then((function(e){t.tableData=e.data.data}))},onSubmit:function(){var t=this;this.http.post_show("coupon/admin/add_coupon",this.form).then((function(){t.$message({type:"success",message:"添加成功!"}),t.form={},t.upfile_banner_list=[],t.form_pro={goods_name:"",content:"",img_id:[],stock:"",points:""},t.dialogVisibleadd=!1,t.getCompany(),t.$router.push({path:"/coupon"})}))},res_banner_imgs:function(t){console.log("res:",t),this.form_pro.img_id.push(t),console.log("xx:",this.form_pro.img_id)},add_user:function(){this.dialogVisibleadd=!0},edit:function(t,e,a,o,s,l){this.form.id=t,this.form.goods_name=e,this.form.content=a,this.form.img_id=o,this.form.stock=s,this.form.points=l,console.log(this.form)},jump_page:function(t){var e=this,a=(t-1)*e.size,o=t*e.size;console.log(a,o),this.list=this.all.slice(a,o)},jumpback:function(){this.$router.push({path:"/coupon"})},sub:function(){},getCompany:function(){},close_fun:function(t){this.clear_data(),t()},clear_data:function(){this.dialogFormVisible=!1}},mounted:function(){this.getCompany(),this.get_pro()}},c=r,d=(a("b679"),a("2877")),m=Object(d["a"])(c,o,s,!1,null,null,null);e["default"]=m.exports},b679:function(t,e,a){"use strict";var o=a("0ee0"),s=a.n(o);s.a}}]);